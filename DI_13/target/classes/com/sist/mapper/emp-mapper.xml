<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sist.mapper.emp-mapper">
	<!-- ì¡°ì¸ -->
	<!--
		SELECT empno,ename,dname,loc
		FROM emp,dept
		WHERE emp.deptno=dept.deptno // DBì˜ Join
		
		while(rs.next()){
			EmpVO vo=new EmpvO();
			vo.setEmpvo(rs.getInt(1));
			vo.setEname(rs.getString(2));
			vo.getDvo().setDname(rs.getString(3)); //Java ì˜ Join
			vo.getDvo().setLoc(rs.getString(4)); //Java ì˜ Join
		}
		
		ðŸ“ MyBatis : ORM(ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°)
			- SQL ì¿¼ë¦¬ ìž‘ì„±ë²• (CURD / JOIN / ë™ì ì¿¼ë¦¬ / í”„ë¡œì‹œì € í˜¸ì¶œ / íŠ¸ë Œì ì…˜)ì„ ì•Œì•„ì•¼í•´
			- #{} : #{name} => 'name'
			- ${} : ${name} => name * columnëª…, tableëª…
	-->
	<resultMap type="com.sist.vo.EmpVO" id="empMap">
	<!-- resultMap:ì»¬ëŸ¼ê³¼ ë³€ìˆ˜ëª…ì„ ë§¤ì¹­ì‹œí‚¬ ë•Œ ì‚¬ìš© -->
		<result column="dname" property="dvo.dname"/>
		<!-- dnameì´ë¼ëŠ” ì»¬ëŸ¼ì´ ë“¤ì–´ì˜¤ë©´ dvo.dname(ê°ì²´ëª….ë³€ìˆ˜ëª…)ì— ë„£ì–´ë¼ -->
		<result column="loc" property="dvo.loc"/>
	</resultMap>
	<sql id="select-emp"><!-- ì¤‘ë³µ sqlë¬¸ìž¥ì„ ì œê±°í•œë‹¤(ìž¬ì‚¬ìš©) -->
		SELECT empno,ename,job,TO_CHAR(hiredate,'yyyy-MM-dd') as dbday,sal,dname,loc
		FROM emp,dept
		WHERE emp.deptno=dept.deptno
	</sql>
	<select id="empdeptListData" resultMap="empMap">
		<include refid="select-emp"/>
		ORDER BY sal DESC
	</select>
	<select id="empdeptDetailData" resultMap="empMap" parameterType="int">
		<include refid="select-emp"/>
		AND empno=#{empno}
	</select>
</mapper>